# Claw-Empire v1.1.1 Release Notes

- Release date: 2026-02-21
- Scope: Office experience overhaul, room-theme persistence/default rollout, report readability upgrades, and post-release hotfix stabilization.

## Highlights

- **Office Manager + Room Theme Control**
  - Added `Office Manager` action in top bar and a dedicated side panel for room color control.
  - Theme editing scope now includes all departments plus `CEO Office` and `Break Room`.
  - Added real-time room highlight while changing room settings so users can see exactly which area is being edited.

- **Smarter Theme Presets (Tone-first)**
  - Presets now operate as tone presets derived from current main color.
  - Selecting a preset adjusts tone only and keeps the main color stable.
  - Preset palette automatically recalculates against the current main color for consistent tonal recommendations.

- **CEO/Break Room Visual Clarity**
  - Improved `CEO OFFICE` label layering and contrast so text stays readable above decorative elements.
  - Enhanced break-room status readability (`Break Room` away label) with stronger contrast treatment.

- **Report Viewer Pagination**
  - Added paginated document browsing in task report popup (`Prev`/`Next` + page indicator).
  - Large document bundles now load in smaller chunks for better scanability during review.

- **Theme Persistence + Deployment Defaults**
  - Room themes are now persisted in both local storage and backend settings (`roomThemes`).
  - Added automatic sync flow to backfill DB theme settings when only local values are present.
  - Added server seed default for `roomThemes`, enabling new deployments to boot with curated office colors.

- **Hotfix: In-progress Recovery + Sync Load Control (2026-02-21)**
  - Prevented false watchdog recovery to `inbox` when an active task still has recent terminal/log activity.
  - Added coalesced live task sync in the app to avoid WS-triggered `/api/tasks` request storms (`ERR_INSUFFICIENT_RESOURCES`).

## Example Screenshots

<p align="center">
  <img src="https://raw.githubusercontent.com/GreenSheep01201/claw-empire/v1.1.1/Sample_Img/Office.png" alt="Office view with room themes" width="49%" />
  <img src="https://raw.githubusercontent.com/GreenSheep01201/claw-empire/v1.1.1/Sample_Img/Office_Manager.png" alt="Office manager panel" width="49%" />
</p>

## Changed Files (Major)

### Frontend
- `src/App.tsx`
- `src/components/OfficeView.tsx`
- `src/components/OfficeRoomManager.tsx`
- `src/api.ts`
- `src/types/index.ts`
- `package.json`

### Backend
- `server/server-main.ts`
- `server/modules/lifecycle.ts`

### Docs
- `docs/releases/README.md`
- `docs/releases/v1.1.1.md`
- `README.md`
- `README_ko.md`
- `README_jp.md`
- `README_zh.md`

## Notes

- Default deployment themes are now controlled through `settings.roomThemes`.
- Existing users keep local custom themes; missing DB values are backfilled automatically.
